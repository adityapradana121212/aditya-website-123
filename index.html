<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Animasi Kata AnyAAA</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const width = canvas.width;
    const height = canvas.height;

    const total = 1000;
    const word = "anyaaa";

    let particles = new Array(total).fill().map(() => ({
      x: Math.random() * width,
      y: Math.random() * height,
      tx: 0,
      ty: 0
    }));

    const shapeCanvas = document.createElement("canvas");
    const sctx = shapeCanvas.getContext("2d");
    shapeCanvas.width = width;
    shapeCanvas.height = height;

    function drawShape(type) {
      sctx.clearRect(0, 0, width, height);
      sctx.fillStyle = "white";
      sctx.save();
      sctx.translate(width / 3, height / 2);

      if (type === "bear") {
        sctx.beginPath();
        sctx.arc(0, -50, 80, 0, Math.PI * 2);
        sctx.fill();
        sctx.beginPath();
        sctx.arc(-60, -110, 30, 0, Math.PI * 2);
        sctx.arc(60, -110, 30, 0, Math.PI * 2);
        sctx.fill();
        sctx.beginPath();
        sctx.arc(0, 120, 120, 0, Math.PI * 2);
        sctx.fill();
      } else if (type === "heart") {
        sctx.beginPath();
        for (let t = 0; t < Math.PI * 2; t += 0.01) {
          let x = 16 * Math.pow(Math.sin(t), 3) * 10;
          let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t)) * 10;
          sctx.lineTo(x, y);
        }
        sctx.fill();
      } else if (type === "rose") {
        sctx.beginPath();
        sctx.arc(0, 0, 60, 0, Math.PI * 2);
        sctx.fill();
        for (let i = 0; i < 6; i++) {
          let angle = (i / 6) * Math.PI * 2;
          let x = Math.cos(angle) * 90;
          let y = Math.sin(angle) * 90;
          sctx.beginPath();
          sctx.arc(x, y, 40, 0, Math.PI * 2);
          sctx.fill();
        }
      }

      sctx.restore();

      const pixels = sctx.getImageData(0, 0, width, height).data;
      let points = [];
      for (let y = 0; y < height; y += 8) {
        for (let x = 0; x < width; x += 8) {
          let index = (y * width + x) * 4;
          if (pixels[index + 3] > 128) {
            points.push({ x, y });
          }
        }
      }
      return points;
    }

    const shapes = ["bear", "heart", "rose"];
    const captions = {
      bear: "ceritanya beruang",
      heart: "ceritanya hati",
      rose: "ceritanya bunga mawar tapi ga mirip"
    };

    let currentShape = 0;
    let shapePoints = drawShape(shapes[currentShape]);
    let startTime = Date.now();
    let finished = false;

    function animate() {
      ctx.clearRect(0, 0, width, height);
      ctx.textAlign = "center";
      ctx.font = "12px Arial";

      if (!finished) {
        let elapsed = (Date.now() - startTime) / 1000;
        if (elapsed > 5) {
          currentShape++;
          if (currentShape >= shapes.length) {
            finished = true;
          } else {
            shapePoints = drawShape(shapes[currentShape]);
            startTime = Date.now();
          }
        }

        if (!finished) {
          particles.forEach((p, i) => {
            const target = shapePoints[i % shapePoints.length];
            if (target) {
              p.tx = target.x;
              p.ty = target.y;
            }

            p.x += (p.tx - p.x) * 0.05;
            p.y += (p.ty - p.y) * 0.05;

            const pinks = ["#ffb6c1", "#ff69b4", "#ff1493", "#db7093"];
            ctx.fillStyle = pinks[i % pinks.length];
            ctx.fillText(word, p.x, p.y);
          });

          ctx.fillStyle = "white";
          ctx.font = "28px Arial";
          ctx.textAlign = "left";
          ctx.fillText(captions[shapes[currentShape]], width * 0.6, height / 2);
        }
      } else {
        // Tulisan terakhir
        ctx.fillStyle = "white";
        ctx.font = "40px Arial";
        ctx.textAlign = "center";
        ctx.fillText("gabut hehe", width / 2, height / 2);
      }

      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
